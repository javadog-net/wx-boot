## å‰è¨€
### ğŸŠç¼˜ç”±
èµ·å› äºæœ¬ç‹—ä¸Šä¸€ä¸ªé¡¹ç›®[ã€ChatGPTã€‘SpringBoot+uniapp+uview2å¯¹æ¥OpenAIï¼Œå¸¦ä½ å¼€å‘ç©è½¬ChatGPT](https://mp.weixin.qq.com/s/b19J36Eo3-ba7bHbWzoZYQ)æœ¬æ‰“ç®—é‡‡ç”¨**å¾®ä¿¡å…¬ä¼—å·ç½‘é¡µæˆæƒç™»å½•**åšç”¨æˆ·é‰´æƒï¼Œä½†æœ€ç»ˆå› å…¬ä¼—å·æ˜¯**æœªè®¤è¯çš„è®¢é˜…å·**ï¼Œ**æ— æƒé™è·å–ç”¨æˆ·ä¿¡æ¯**ï¼Œæ‰€ä»¥æ”¹å˜æ€è·¯ï¼Œé‡‡ç”¨ç™»å½•æ³¨å†Œæ–¹å¼å®ç°ç”¨æˆ·åŒºåˆ†ã€‚ä½†åœ¨å¼€å‘ä¸­ï¼Œå­¦ä¹ äº†**å¾®ä¿¡ç½‘é¡µæˆæƒç™»å½•**æµç¨‹ï¼Œç‰¹æ­¤åˆ†äº«ï¼Œå¸¦ä½ æ‰‹æŠŠæ‰‹æ“ä½œï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ‹æ¸…æˆæƒçš„é€»è¾‘ã€‚
*******
### â²ï¸å»ºè®®é˜…è¯»æ—¶é•¿
çº¦20åˆ†é’Ÿ
*******
### ğŸ¯ä¸»è¦ç›®æ ‡
1. **æµ‹è¯•å…¬ä¼—å·**å®ç°**ç½‘é¡µæˆæƒ**å¹¶è·å–**ç”¨æˆ·åŸºæœ¬ä¿¡æ¯**
2. **çµæ´»æŒæ¡å¾®ä¿¡æ¥å£æ–‡æ¡£**ï¼Œç†Ÿç»ƒå¯¹æ¥ç›¸å…³æ¥å£
3. æ•´ç†æˆæƒé€»è¾‘ï¼Œå‰åç«¯å¯¹æ¥ç†Ÿæ‚‰æµç¨‹
******

### ğŸ‘¨â€ğŸ“è¯•ç”¨äººç¾¤
1. å¯¹äº**å¾®ä¿¡å…¬ä¼—å·ç½‘é¡µæˆæƒ**æµç¨‹æ¨¡ç³Šæˆ–åˆæ¬¡æ¥è§¦
2. åšè¿‡ç›¸å…³æµç¨‹ä½†æƒ³å›é¡¾ç†Ÿæ‚‰å¤ç›˜
******
### ğŸå¿«é€Ÿé“¾æ¥
å…¬ä¼—å·ï¼š**JavaDogç¨‹åºç‹—**
**åœ¨å…¬ä¼—å·ï¼Œå‘é€ã€wxã€‘ ï¼Œæ— ä»»ä½•å¥—è·¯å³å¯è·å¾—**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/d4fce750c9b0480ebb13bbd01bce7b4b.png)



******
###  ğŸ¯çŒœä½ å–œæ¬¢
|åºå·| åˆ†ç±»| æ–‡ç« æè¿° | 
| --- | ----- |  ----- |
| 1 | ChatGPT |  [æ‰‹æ‘¸æ‰‹ï¼Œå¸¦ä½ ç©è½¬ChatGPT](https://mp.weixin.qq.com/s/9wEelbTN6kaChkCQHmgJMQ) |
| 2 | é¡¹ç›®å®æˆ˜ |  [SpringBoot+uniapp+uview2å¯¹æ¥OpenAIï¼Œå¸¦ä½ å¼€å‘ç©è½¬ChatGPT](https://mp.weixin.qq.com/s/b19J36Eo3-ba7bHbWzoZYQ)  |
|3  | é¡¹ç›®å®æˆ˜ | [SpringBoot+uniapp+uview2æ‰“é€ ä¸€ä¸ªä¼ä¸šé»‘çº¢åå•åæ§½å°ç¨‹åº](https://blog.csdn.net/baidu_25986059/article/details/129263139) |

### ğŸ©æ°´å›¾
![è¯·æ·»åŠ å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/f514fdb2153543fe9f8fbb6897f3243a.gif)
******

## æ­£æ–‡
### ğŸ“å‡†å¤‡
#### 1.æœåŠ¡å·/è®¢é˜…å·(å·²è®¤è¯)
> ç½‘é¡µæˆæƒæ¥å£æƒé™åªæœ‰**æœåŠ¡å·**æˆ–è€…**å·²è®¤è¯çš„è®¢é˜…å·**æœ‰æƒé™ï¼Œä¹Ÿå°±æ˜¯éœ€è¦æ¯å¹´ç¼´çº³300å—é’±è´¹ç”¨è®¤è¯è¿‡æ‰ä¼šæœ‰æƒé™ï¼Œå¦åˆ™æ— æ³•åœ¨æ­£å¼å…¬ä¼—å·è°ƒç”¨æ­¤æ¥å£ã€‚ 
> ğŸš¨ åˆ‡è®°æ— æƒé™æ—¶è°ƒç”¨ä¼šæç¤ºã€å¾®ä¿¡å…¬ä¼—å·æˆæƒscopeå‚æ•°é”™è¯¯æˆ–æ²¡æœ‰scopeæƒé™ã€‘ï¼Œåªå¯åœ¨**æµ‹è¯•å…¬ä¼—å·è¿›è¡Œè°ƒè¯•**ï¼ï¼ï¼


#### 2.å¼€å‘å·¥å…·
|åºå·| åˆ†ç±»| å·¥å…·| 
| --- | ----- |  ----- |
| 1 | åç«¯ |  IDEA |
| 2 | å‰ç«¯ | uniapp  |
| 3 | å‰ç«¯ | å¾®ä¿¡å¼€å‘è€…å·¥å…·|

#### 3.æ¥å£æ–‡æ¡£

[å¾®ä¿¡å®˜æ–¹å…¬ä¼—å·æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html)

#### 4.ç½‘é¡µæˆæƒè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯é…ç½®
> ä»¥æµ‹è¯•å·è¿›è¡Œå±•ç¤ºæ“ä½œæ­¥éª¤

##### åœ¨å…¬ä¼—å·å·¦ä¾§èœå•ã€å¼€å‘å·¥å…·ã€‘=ã€‹ã€å…¬ä¼—å¹³å°æµ‹è¯•å¸å·ã€‘
![](https://img-blog.csdnimg.cn/56d167b00c4041558c623f2e1578958a.png)
##### åœ¨ç½‘é¡µæœåŠ¡-ç½‘é¡µè´¦å·-ä¿®æ”¹
![](https://img-blog.csdnimg.cn/7c204111a28242f390026212a96d0592.png)
##### ä¿®æ”¹OAuth2.0ç½‘é¡µæˆæƒã€æˆæƒå›è°ƒé¡µé¢åŸŸåã€‘
> **åˆ‡è®°ä¸è¦å¸¦http**ï¼Œæ­¤å¤„åœ°å€å¡«å†™æœ¬åœ°ipå³å¯ã€‚å¯åœ¨é”®ç›˜é€šè¿‡ã€win+Rã€‘ï¼Œè¾“å…¥ã€cmdã€‘ï¼Œç¡®å®šåè¾“å…¥ipconfigï¼Œå¤åˆ¶å‡ºIPv4åœ°å€å³å¯ã€‚æˆ–è€…å¯åŠ¨uniappåï¼Œæ§åˆ¶å°æ‰“å°çš„åœ°å€ï¼Œ**ä»¥ä¸Šæ–¹æ³•ä»…é™æœ¬åœ°è°ƒè¯•**ã€‚

![](https://img-blog.csdnimg.cn/98dd380c9fc94844b6030a259f413934.png)
![](https://img-blog.csdnimg.cn/927f597802224340a6f80b346dbc18f7.png)

![](https://img-blog.csdnimg.cn/3e551c285ca94cb7a402b437893b9946.png)


******
### ğŸ”›é—®é¢˜å‰–æ
#### 1.ä»€ä¹ˆæ˜¯ç½‘é¡µæˆæƒï¼Ÿ
##### å®˜ç½‘è§£é‡Š
> å¦‚æœç”¨æˆ·åœ¨**å¾®ä¿¡å®¢æˆ·ç«¯**ä¸­è®¿é—®**ç¬¬ä¸‰æ–¹ç½‘é¡µ**ï¼Œå…¬ä¼—å·å¯ä»¥é€šè¿‡å¾®ä¿¡**ç½‘é¡µæˆæƒæœºåˆ¶**ï¼Œæ¥è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œè¿›è€Œå®ç°ä¸šåŠ¡é€»è¾‘ã€‚

##### ç®€å•ç†è§£
> é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬é€šè¿‡**å¾®ä¿¡å†…ç½®æµè§ˆå™¨**å»è®¿é—®å…¶ä»–ç½‘ç«™æ—¶ï¼Œå¯ä»¥é€šè¿‡**å¾®ä¿¡æˆæƒç­–ç•¥**ï¼Œåœ¨ç›®æ ‡ç½‘ç«™å¯ä»¥è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚æ˜µç§°ï¼Œå¤´åƒç­‰

##### ä¸¾ä¸ªæ —å­ ğŸŒ°
>  é€šè¿‡**å¾®ä¿¡å†…æ‰“å¼€csdnåˆ†äº«é“¾æ¥**ï¼Œå½“è·³è½¬åˆ°csdnç½‘é¡µæ—¶ï¼Œcsdnå°±å¯ä»¥é€šè¿‡**ç½‘é¡µæˆæƒ**ï¼Œç›´æ¥æ‹¿åˆ°æˆ‘ä»¬å¾®ä¿¡çš„æ˜µç§°ï¼Œå¤´åƒä¿¡æ¯ç­‰ï¼Œå®Œæˆ**è‡ªä¸»æˆæƒæ³¨å†Œ**

#### 2.ç½‘é¡µæˆæƒæµç¨‹æ­¥éª¤ï¼Ÿ
##### 1. ç”¨æˆ·åŒæ„æˆæƒï¼Œè·å–code
> å‰ç«¯å¼•å¯¼ç”¨æˆ·è¿›å…¥æˆæƒé¡µé¢åŒæ„æˆæƒï¼Œè·å–code

![](https://img-blog.csdnimg.cn/283bba59941f49238e9398b2ac379d15.png)
##### 2. é€šè¿‡ code æ¢å–ç½‘é¡µæˆæƒaccess_token
> é€šè¿‡å‰ç«¯è·å–çš„codeï¼Œ**è°ƒç”¨æˆ‘ä»¬è‡ªå·±æœåŠ¡å™¨æ¥å£**ï¼Œé€šè¿‡**åå°ä½¿ç”¨codeè°ƒå–å¾®ä¿¡æ¥å£**ï¼Œæ¢å–**access_token(ç½‘é¡µæˆæƒæ¥å£è°ƒç”¨å‡­è¯)**ï¼Œaccess_tokenæ˜¯è°ƒç”¨ç”¨æˆ·ä¿¡æ¯åŠå…¶ä»–æ¥å£æ‰€å¿…éœ€çš„å‚æ•°

##### 3. åˆ·æ–°access_tokenï¼ˆå¦‚æœéœ€è¦ï¼‰
> ç”±äº**access_token**æ‹¥æœ‰è¾ƒçŸ­çš„**æœ‰æ•ˆæœŸ**ï¼Œå½“**access_tokenè¶…æ—¶**åï¼Œå¯ä»¥ä½¿ç”¨**refresh_token**è¿›è¡Œåˆ·æ–°ï¼Œrefresh_tokenæœ‰æ•ˆæœŸä¸º30å¤©ï¼Œå½“refresh_tokenå¤±æ•ˆä¹‹åï¼Œéœ€è¦**ç”¨æˆ·é‡æ–°æˆæƒ**

##### 4. æ‹‰å–ç”¨æˆ·ä¿¡æ¯
> å¼€å‘è€…å¯ä»¥é€šè¿‡**access_token**å’Œ **openid** æ‹‰å–ç”¨æˆ·ä¿¡æ¯

ğŸ¯ å¦‚æœçœ‹ä¸æ‡‚ä¸è¦åˆ’èµ°ï¼Œä¸‹é¢æ‰æ˜¯é‡ç‚¹è®²è§£
ğŸ¯ å¦‚æœçœ‹ä¸æ‡‚ä¸è¦åˆ’èµ°ï¼Œä¸‹é¢æ‰æ˜¯é‡ç‚¹è®²è§£
ğŸ¯ å¦‚æœçœ‹ä¸æ‡‚ä¸è¦åˆ’èµ°ï¼Œä¸‹é¢æ‰æ˜¯é‡ç‚¹è®²è§£
******

### ğŸ‘¼å¼€å§‹
#### ç®€æ˜“æµç¨‹å›¾
> ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œç”»äº†ä¸€ä¸ªç®€æ˜“æµç¨‹å›¾ï¼Œæœ‰ç–‘æƒ‘åˆ«æ€¥ï¼Œä¸‹é¢è¿˜æœ‰ç°å®åˆ—å­è§£é‡Šç‰ˆ

![](https://img-blog.csdnimg.cn/9a5ac132fed24eeabe9c1a5cc80aa81a.png)

> ä¸¾ä¸ªå®é™…è´­ä¹°**è‹¹æœæ‰‹æœº**ä¾‹å­ï¼Œå¯èƒ½ä¸å¤ªè´´åˆï¼Œä½†æœ‰åŠ©ä¸ç†è§£

![](https://img-blog.csdnimg.cn/93a40258a8d14f97ad398dceb064aafb.png)
******
#### æ­¥éª¤
> æ ¹æ®ä¸‹å›¾è¿›è¡Œæ­¥éª¤åˆ†æ

![](https://img-blog.csdnimg.cn/ebb0bf8e2b0a40669d958c82616e927e.png)
##### 1.æ­¥éª¤ä¸€

 å‰ç«¯uniappä¸­**æ–°å»ºæˆæƒé¡µ**

> é¡µé¢è¿›å…¥åï¼ŒonLoadç›´æ¥è·³è½¬å¾®ä¿¡æ¥å£åœ°å€ï¼Œå¾®ä¿¡æ–¹é€šè¿‡appIdè·å–codeï¼Œå¹¶**æºå¸¦code**æ ¹æ®**redirect_uriè¿”å›åˆ°å½“å‰é¡µé¢**ï¼Œæ­¤åˆ»**åœ°å€æ ä¸­å°±åŒ…å«ç€codeä¿¡æ¯**

**è·³è½¬å‰**
![](https://img-blog.csdnimg.cn/bb26cb81414e47efa6500076c364e617.png)

**è·³è½¬å**
![](https://img-blog.csdnimg.cn/58cd73256d5143b38ae6da03849d542d.png)

å…³é”®ä»£ç 

```js
//é€šè¿‡å¾®ä¿¡å®˜æ–¹æ¥å£è·å–codeä¹‹åï¼Œä¼šé‡æ–°åˆ·æ–°è®¾ç½®çš„å›è°ƒåœ°å€ã€redirect_uriã€‘,ä¹‹åä¼šç»§ç»­è¿›å…¥åˆ°onload()æ–¹æ³•
location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=" + appid + "&redirect_uri=" +
local + "&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect""
```
**appid** ï¼šå…¬ä¼—å·å¯¹åº”çš„appId
**redirect_uri**ï¼šé¡µé¢å›è·³åœ°å€ï¼Œä¹Ÿå°±æ˜¯å½“å‰é¡µé¢çš„åœ°å€ï¼Œæ­¤åœ°å€ä¹Ÿå°±æ˜¯åœ¨ä¸Šæ–¹**å‡†å¤‡4**ä¸­OAuth2.0ç½‘é¡µæˆæƒã€æˆæƒå›è°ƒé¡µé¢åŸŸåã€‘å¡«å…¥çš„å€¼ã€‚å¾®ä¿¡æ ¹æ®è¿™ä¸ªå›è°ƒåœ°å€è¿›è¡Œæºå¸¦codeå›è·³ã€‚

å…¶ä»–å‚æ•°å¯çœ‹å®˜æ–¹å‚æ•°è¯´æ˜

![](https://img-blog.csdnimg.cn/b35b0beaedf6484480d0fa50388b2623.png)
******
##### 2.æ­¥éª¤äºŒ
1.åç«¯æä¾›æ¥å£ï¼Œ**å…¥å‚**ä¸ºä¸Šä¸€æ­¥çš„**code**ï¼Œ**é€šè¿‡code**è°ƒå–å¾®ä¿¡æ¥å£**æ¢å–access_token**ã€‚æ­¤å¤„åç«¯ä½¿ç”¨äº†[weixin-java-mp](https://github.com/Wechat-Group/WxJava)ç»„ä»¶ï¼Œæ–¹ä¾¿å¯¹æ¥å¾®ä¿¡æ¥å£ã€‚

```java
@Api(tags = "ç½‘é¡µæˆæƒæ§åˆ¶å™¨")
@RestController
@RequestMapping("/login")
public class AuthController {

    @Resource
    private UserService userService;

    @ApiOperation(value = "ç½‘é¡µæˆæƒè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯", notes = "ç½‘é¡µæˆæƒè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯")
    @GetMapping
    public ResponseData login(@RequestParam String code) throws WxErrorException {
        return userService.auth(code);
    }
}
```

2.å‰ç«¯å¸¦ç€codeï¼Œè°ƒç”¨1ä¸­çš„/loginæ¥å£
```js
const res = await this.$api.login({
		code
	})
	if (!res.success) {
		uni.$u.toast(res.message)
		return
	}
	// ç”¨æˆ·ä¿¡æ¯
	this.userInfo = res.data;
}
```
******
##### 3.æ­¥éª¤ä¸‰
å°†æ­¥éª¤äºŒåç«¯æ‹¿åˆ°çš„**access_token**ï¼Œè°ƒç”¨å¾®ä¿¡**è·å–ç”¨æˆ·ä¿¡æ¯**ï¼Œå°†ç”¨æˆ·ä¿¡æ¯è¿”å›ç»™å‰ç«¯

```java
 WxOAuth2AccessToken accessToken;
        WxMpUser wxMpUser;
        try {
        	// è·å–accessToken 
            accessToken = wxMpService.getOAuth2Service().getAccessToken(code);
            log.info("AccessToken={}" + accessToken);
            // è·å–ç”¨æˆ·ä¿¡æ¯
            wxMpUser = wxMpService.getUserService().userInfo(accessToken.getOpenId());
            log.info("wxMpUser={}", JSONUtil.toJsonStr(wxMpUser));
        } catch (WxErrorException e) {
            return ResponseData.error(e.getMessage());
        }
        return ResponseData.success(wxMpUser);
```
******

### âŒå¸¸è§é”™è¯¯
#### é”™è¯¯1ï¼šredirect_uri å‚æ•°é”™è¯¯
> å¾®ä¿¡ä¸­ã€OAuth2.0ç½‘é¡µæˆæƒã€‘-**æˆæƒå›è°ƒé¡µé¢åŸŸåé…ç½®é”™è¯¯**


![](https://img-blog.csdnimg.cn/87e8ed08eff14244821c198375d6c2f1.png)
![](https://img-blog.csdnimg.cn/54c670d5f7aa470493d363e5604ae8f3.png)
#### é”™è¯¯2ï¼šoauth_codeå·²ä½¿ç”¨
> **codeæ¯æ¬¡ä½¿ç”¨æ¢å–access_tokenåä¾¿å¤±æ•ˆ**ï¼Œå†æ¬¡è°ƒç”¨åˆ™ä¼šæŠ¥é”™ï¼Œè¯·**æ ¹æ®è‡ªå·±ä¸šåŠ¡**ï¼Œè¿›è¡Œç¼“å­˜æ¯”è¾ƒï¼Œ**é˜²æ­¢é‡å¤è°ƒç”¨**

![](https://img-blog.csdnimg.cn/188f3cbd636146f2a5b33872b30fdcb9.png)
## æ€»ç»“
æœ¬æ–‡è™½ç„¶ç¯‡å¹…é•¿ï¼Œä½†æ˜¯å®ç°åŠŸèƒ½ç®€å•ï¼Œä¸»è¦ç›®çš„æ˜¯å±•ç¤º**ç½‘é¡µæˆæƒ**çš„æµç¨‹ä¸æ€è·¯ï¼Œå¯¹äºå¾®ä¿¡å¯¹æ¥ï¼Œæœ¬äººå»ºè®®å¤šæŸ¥çœ‹**å¾®ä¿¡å®˜æ–¹æ–‡æ¡£**ï¼Œå†™çš„å¾ˆè¯¦ç»†ï¼Œé€šè¯»è¿‡å‡ éåå°±ä¼šå¯¹ç–‘é—®ç‚¹æœ‰äº›è®¸é¢†æ‚Ÿï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚

![](https://img-blog.csdnimg.cn/e74f3636c05a430eab8819333fa004eb.jpeg)


| JavaDog| ç‹—å±‹åœ°å€ |
| :----:| :----: | 
| ä¸ªäººåšå®¢ | [https://blog.javadog.net](https://blog.javadog.net) | 
| å…¬ä¼—å· | [https://mp.weixin.qq.com/s/_vgnXoQ8FSobD3OfRAf5gw](https://mp.weixin.qq.com/s/_vgnXoQ8FSobD3OfRAf5gw) | 
| CSDN  | [https://blog.csdn.net/baidu_25986059](https://blog.csdn.net/baidu_25986059) | 
| æ˜é‡‘ | [https://juejin.cn/user/2172290706716775](https://juejin.cn/user/2172290706716775)| 
| çŸ¥ä¹ | [https://www.zhihu.com/people/JavaDog](https://www.zhihu.com/people/JavaDog) | 
| ç®€ä¹¦| [https://www.jianshu.com/u/1ff9c6bdb916](https://www.jianshu.com/u/1ff9c6bdb916) | 
| gitee|[https://gitee.com/javadog-net](https://gitee.com/javadog-net)  | 
| GitHub|[https://github.com/javadog-net](https://github.com/javadog-net)| 
